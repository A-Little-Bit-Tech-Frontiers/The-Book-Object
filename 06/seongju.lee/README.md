## 협력과 메시지

### 메시지와 메시지 전송
메시지는 객체들이 협력하기 위한 수단이다. 한 객체가 다른 객체에게 하는 요청을 메시지라고 하며, 그 행위를 메시지 전송 혹은 메시지 패싱이라고 하기도 한다.

- 메시지의 구성
- 수신자, 오퍼레이션명, 인자
- **수신자**: 객체
- **오퍼레이션**: 퍼블릭 인터페이스의 행동을 요청하는 메시지
- **인자**: 행동을 위해 필요한 정보

위 세 가지로 구성되는데, 여기서 중요한 점이 오퍼레이션명인 것으로 보인다.

오퍼레이션명을 지을 때, 내부의 상태를 묻는다면 그것은 옳지 않을 것이다. 어떤 결정을 내리는 로직이 객체 외부에 존재하는 것이기 때문이다. 즉, 외부에서 객체의 상태를 알고 있다는 뜻이 되므로 결합도가 매우 올라간다. ([참고](https://github.com/A-Little-Bit-Tech-Frontiers/The-Book-Object/tree/main/04/seongju.lee))

- 메시지, 오퍼레이션, 메서드의 관계

<img width="617" alt="image" src="https://github.com/A-Little-Bit-Tech-Frontiers/The-Book-Object/assets/67941526/d47db304-64f4-4e21-aafb-b3b520bf215e">


## 디미터의 법칙

협력하는 객체 간 내부 구조에 대한 결합으로 발생하는 설계문제를 해결하기 위해 고안된 법칙. 즉, 협력 경로를 제한함으로써 강결합을 방지하기 위함이다.

- this 객체
- 메서드의 매개변수
- this의 속성
- this의 속성인 컬렉션의 요소
- 메서드 내에서 생성된 지역 객체

위 조건을 만족하는 인스턴스에 한해서 메시지를 전송하도록 설계하고 구현해야 함을 의미한다.

`audience.getBag().minusAmount(ticket.getFee())`

위 코드는 디미터 법칙을 위반한 코드이다.
audience에서 인스턴스 가지고 있는 bag을 호출하는 것까지는 좋은데, bag이 가지고 있는 속성까지 침범하기 때문이다.

근본적으로 인터페이스와 구현의 분리 원칙을 위반한다는 것이고, 객체의 내부구조는 구현에 해당한다는 것을 기억해야 한다.

### 묻지 말고 시켜라

결국 한 객체가 다른 객체의 행동을 요청할 때는 내부 구조에 관해 묻지말고 원하는 작업을 명확히 지시해야 하는 것이다.
즉, 요청하는 객체가 원하는 일을 퍼블릭 인터페이스에 적절하게 표현해야 한다. 여기서 적절하게 표현하는 방법이 위에서 언급한 메시지인 것이다. 오퍼레이션은 클라이언트가 객체에게 무엇을 원하는지 표현하기 위함이고, 요청을 받는 객체는 자신이 아닌 클라이언트의 의도를 표현하는 오퍼레이션명을 가져야 한다.


