# 6장 메시지와 인터페이스

### 인터페이스 품질을 위한 원칙

1. 디미터 법칙
    1. 객체 내부 구조에 강하게 결합되지 않도록 **협력 경로를 제한**하는 방법
    2. 협력 대상 객체가 가지고 있는 데이터까지만 접근하고 그 데이터가 가진 부분까지 침범하지 않는다. (dot, 포인터 하나까지만 사용)
    
    ```csharp
    public class Monster {
    	private readonly string m_owner;
    	
    	public Monster(BossMonster owner) {
    		// 디미터 법칙 위배, getter 를 체이닝 호출하여 "기차 충돌" 위험성 존재
    		// 단순하게 "." 접근으로만 판단하는 것이 아닌, '다른 객체의 영역'을 접근하는지 봐야 한다.
     		m_owner = owner.getBossMonster().getObject()
    	}
    }
    ```
    
2. 묻지말고 시키기
    1. 협력하는 객체의 상태를 보지말고, 어떤 행동을 요청하는 오퍼레이터를 호출하는 것이다.
    2. 외부 객체의 상태를 의존하는 것은 캡슐화가 깨져 응집도가 낮아진다.
3. 의도를 드러내는 선택자
    1. 하나의 의도를 드러내는 인터페이스를 작성하는 훈련을 하면 다양한 타입의 객체가 협력하는 유연성을 얻을 수 있다.
4. 명령-쿼리 분리 원칙
    - 명령(Command)
        - 객체의 상태를 변경하는 오퍼레이션
    - 쿼리(Query)
        - 객체와 관련된 정보를 반환하는 오퍼레이션
    1. 명령과 쿼리는 서로의 영역을 침범하는 행동을 가질 수 없다. 즉, 명령은 반환값을 가져서는 안되며 쿼리는 변경을 수행해서는 안된다. 이것을 위반하면 부수효과가 발생하게 되어 오퍼레이터의 결과 예측이 어려워질 수 있다.
    2. 명령과 쿼리를 분리하면, 부수효과를 가지지 않도록 오퍼레이터를 설계함으로써 참조 투명성을 만족시키고 부수효과로 인해 값이 변하지 않는 불변성을 지니게 된다.