## 프로시저 추상화와 데이터 추상화

현대적인 프로그래밍 언어를 특정 짓는 중요한 두 가지 추상화 메커니즘은 **프로시저 추상화**와 **데이터 추상화**다.
**프로시저 추상화**는 소프트웨어가 **무엇을 하는지** 추상화 하는 것이며, **데이터 추상화**는 소프트웨어가 **무엇을 알아야 하는지**를 추상화 하는 것이다.
그렇다면, 시스템을 분해하기 위해서 프로시저 추상화를 사용할지 혹은 데이터 추상화를 사용할지를 결정해야 한다.

### 프로시저 추상화

- 기능을 중심으로 분해하는 것이다.
- 반복적으로 실행되거나 유사하게 실행되는 것들을 한 곳에 모아두고, 로직을 재사용하며 중복을 방지하는 방법이다.
- 상세한 내부 구현을 모르더라도 퍼블릭 인터페이스를 통해 프로시저 호출이 가능하기 때문에, 추상화라고 부르는 것이다.
- 전통적인 기능 분해 방법으로는 하향식 접근법이 있고, 하위 기능으로 갈 수록 더 세부적이고 덜 추상적인 집합으로 분해된다. 즉, 프로시저를 호출하는 절차지향적 방식이라고 볼 수도 있을 것 같다.

- 하향식 분해법의 문제점
    - 기능 추가나 요구사항 변경으로 인해 상위 메시지의 비즈니스 로직을 빈번하게 수정해야 한다.
    - **비즈니스 로직이 사용자 인터페이스와 강하게 결합**된다.
    - 하향식 분해는 너무 이른 시기에 함수들의 실행 순서를 고정시키기 때문에 **유연성과 재사용성이 저하**된다.
    - 데이터 형식이 변경될 경우 파급효과를 예측할 수 없다.

이러한 변경에 분리한 점을 파악하고, 패러다임이 객체지향으로 변한 것이다.

### 데이터 추상화

데이터 추상화는 소프트웨어가 무엇을 알아야 하는지를 추상화한 개념으로, 시스템을 분리하는 방식에는 크게 두가지가 있다.

1. 데이터를 중심으로 **타입을 추상화**
2. 데이터를 중심으로 **프로시저를 추상화**

데이터 추상화를 구현하기 위해서는 아래와 같은 프로그래밍 언어의 지원이 필요하다.

- 타입 정의를 선언할 수 있어야 한다.
- 타입의 인스턴스를 다루기 위해 사용할 수 있는 오퍼레이션의 집합을 정의할 수 있어야 한다.
- 제공된 오퍼레이션을 통해서만 조작할 수 있도록 데이터를 외부로부터 보호할 수 있어야 한다.
- 타입에 대해 여러 개의 인스턴스를 생성할 수 있어야 한다.

아래 표를 로직을 기준으로 **타입 추상화**와 **프로시저 추상화**를 비교해서 이해해보려고 한다.

|  | Card Reservation | Cash Reservation |
| --- | --- | --- |
| reserve | 카드예약 | 현금예약 |
| cancel | 카드예약 취소 | 현금예약 취소 |

1. **타입을 추상화**
    
    Reservation이라는 타입에는 내부에 Card와 Cash가 공존한다.
    설계의 관점에서 Reservation타입은 구체적인 예약타입을 외부에 캡슐화 하고 있다. 하나의 대표적인 타입이 다수의 세부적인 타입을 감추기 때문에 타입 추상화라고 한다. 
    개별 오퍼레이션이 모든 개념적인 타입에 대한 구현을 포괄하면서, 하나의 물리적인 타입(Reservation) 안에 전체 타입을 감추는 것을 데이터 추상화 기법이라고 한다. 즉, 오퍼레이션을 기준으로 타입을 통합하는 것이다.
    

2. **프로시저를 추상화**
    관점을 달리 해보자.
    Cash와 Card이라는 두 개의 타입을 명시적으로 정의하고, 두 예약유형에 맞게 실행절차를 각각 분배한다. 즉, 인터페이스를 두고 각 클래스들이 오퍼레이션을 적절하게 구현하는 다형성을 사용하게 된다.
    즉, 프로시저를 추상화하는 개념이 곧 절차지향이다.
