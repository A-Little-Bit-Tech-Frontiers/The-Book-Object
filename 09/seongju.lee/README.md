## 개방-폐쇄 원칙(OCP: Open-Closed Principle)

- 확장에 대해 열려있다(개방): 요구사항이 변경될 때, 이 변경에 맞게 새로운 동작을 추가해서 기능을 확장시킬 수 있어야 한다.
- 변경에 대해 닫혀있다(폐쇄): 요구사항이 변경될 때, 기존의 코드는 변경되지 않아야 한다.

위 원칙을 만족시키기 위해서는 컴파일타임 의존성은 고정시킴으로써 변경에 닫혀있도록 하고, 런타임 의존성을 변경시킴으로써 확장에 열려있도록 설계해야 한다.

방법은 추상화!

## 의존성 주입

컴파일타임 의존성과 런타임 의존성의 차이점을 해소하기 위한 방법으로, 의존성을 객체의 퍼블릭 인터페이스에 명시적으로 드러내서 외부에서 필요한 런타임 의존성을 전달할 수 있도록 만드는 방법이다.

## 의존성 역전 원칙(DIP: Dependency Inversion Principle)

- 상위 수준의 모듈은 하위 수준의 모듈에 의존해서는 안된다. 둘 모두 추상화에 의존해야 한다.
- 추상화는 구체적인 사항에 의존해서는 안된다. 구체적인 사항은 추상화에 의존해야 한다.

<img width="587" alt="image" src="https://github.com/A-Little-Bit-Tech-Frontiers/The-Book-Object/assets/67941526/9cedae8e-f970-44b2-a174-4cc4cc38bff2">


- 인터페이스가 서버 모듈 쪽에 위치하는 전통적인 모듈 구조

Movie를 정상적으로 컴파일 하기 위해서는 DiscountPolicy가 필요하므로 Movie를 다양한 컨텍스트에서 재사용하기 위해서는 불필요한 Amount, Percent와 같은 클래스들도 같이 배포되어야 한다.

따라서, 추상화를 클라이언트가 속한 패키지에 포함시켜야 한다. 그리고 함께 재사용될 필요가 없는 클래스들은 별도의 독립적인 패키지에 모아야 하는데, 이러한 패턴은 분리 인터페이스(**Separated** **interface**) 패턴이라고 한다.

<img width="610" alt="image" src="https://github.com/A-Little-Bit-Tech-Frontiers/The-Book-Object/assets/67941526/0be0e690-08c0-4eab-bc21-e843d18d93fb">


- 인터페이스 소유권을 역전시킨 객체지향 모듈 구조

Movie와 추상 클래스인 DiscountPolicy를 하나의 패키지로 모으는 것은 Movie를 특정한 컨텍스트로부터 완벽하게 독립시켰다. 불필요한 클래스까지 배포하지 않아도 된다.
