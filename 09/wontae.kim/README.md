# 9장 유연한 설계

### 유연한 설계를 위한 원칙

- **개방-폐쇄 원칙 (Open-Close Principle)**
    - 확장에는 열려있어야 하고, 수정에는 닫혀있어야 한다는 SOLID 원칙 중 하나
    - 객체가 추상적인 인터페이스에 의존하면, 런타임에 의존하는 객체와의 의존성만 수정할 수 있기 때문에 OCP 를 지킬 수 있다.
    - 핵심은 추상화에 의존하는 것
- **생성 - 사용 분리**
    - 연결과 실행 단계를 분리해서 생각한다.
    - ”생성“ 에 특화된 Factory Class 만들어서 사용하는 방법
    - “행위”적 분해에 따른 도메인과 분리된 Pure Fabrication (순수한 가공물) 에 책임 할당하기
- **의존성 주입 ***
    - 의존하는 객체를 사용하는 객체에 주입하여 런타임에 의존하도록 하는 방법
    - constructor, setter, method 주입 방식에 따라 구현체를 주입해서 의존시킨다.

유연하고 재사용이 가능하며 컨텍스트에 독립적인 설계는 전통적인 패러다임에서의 의존성의 방향을 역전시킨다.

즉, 상위 모듈이 하위 모듈을 의존해서 트리식으로 의존하는 방식을 모든 모듈이 추상화된 인터페이스에 의존하도록 변경한다.

유연한 설계는 복잡성을 수반한다. 추상적인 인터페이스를 의존하는 프로그램은 전체적인 관계를 파악하기 매우 어려운 축에 속한다. 상위 모듈이 하위 모듈을 직접적으로 의존하는 설계는 분명 유연성은 매우 떨어지지만, 구조를 직접 접하는 사람의 입장에서는 직관적으로 이해할 수 있기에 프로그램을 파악하는 데에는 복잡하지 않다. 

그렇기 때문에, 유연한 설계가 반드시 필요할 때에만 유용하다는 것을 알고 있어야 한다. 또한, 이러한 설계를 하기 전에 객체간의 협력과 책임을 최우선적으로 생각해야 한다.